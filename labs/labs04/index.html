<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lab 04 – Captura de credenciales en protocolos inseguros</title>
  <link rel="icon" href="/el-pergamino-digital/assets/favicon.png" type="image/png" />
  <style>
    :root { color-scheme: dark; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
    }
    nav {
      background-color: #1f1f1f;
      padding: 1em;
      text-align: center;
    }
    nav a {
      color: #e0e0e0;
      margin: 0 1em;
      text-decoration: none;
    }
    nav a.activo {
      font-weight: bold;
      text-decoration: underline;
    }
    h1 {
      text-align: center;
      margin-top: 1.5em;
      color: #ffffff;
    }
    .subtitulo {
      text-align: center;
      color: #bbbbbb;
      margin-bottom: 2em;
    }
    main {
      max-width: 900px;
      margin: auto;
      padding: 2em;
    }
    section {
      margin-bottom: 2em;
    }
    h2 {
      color: #90caf9;
    }
    code {
      background-color: #1e1e1e;
      padding: 0.2em 0.4em;
      border-radius: 4px;
      font-family: monospace;
    }
    footer {
      text-align: center;
      padding: 2em;
      background-color: #1e1e1e;
      font-size: 0.9em;
      color: #aaaaaa;
    }
    @media (max-width: 600px) {
      body { font-size: 1.1em; }
      h1 { font-size: 1.8em; }
      .subtitulo { font-size: 1.1em; }
      nav a { display: block; margin: 0.5em 0; }
    }
  </style>
</head>
<body>
  <nav>
    <a href="/el-pergamino-digital/index.html">Inicio</a>
    <a href="/el-pergamino-digital/labs/" class="activo">Laboratorios</a>
    <a href="/el-pergamino-digital/glosario/">Glosario</a>
    <a href="/el-pergamino-digital/simulador/">Simulador</a>
    <a href="/el-pergamino-digital/modulos/">Módulos</a>
  </nav>

  <h1>Lab 04 – Captura de credenciales en protocolos inseguros</h1>
  <p class="subtitulo">Análisis de tráfico en texto claro para identificar fugas de autenticación en FTP, Telnet y HTTP</p>

  <main>
    <section>
      <h2>Objetivo</h2>
      <p>Capturar y analizar credenciales transmitidas en texto plano a través de protocolos inseguros como FTP, Telnet y HTTP, utilizando herramientas de sniffing en un entorno controlado para demostrar la importancia del cifrado en la protección de datos sensibles.</p>
    </section>

    <section>
      <h2>Alcance y limitaciones</h2>
      <p><strong>Alcance:</strong> Captura de tráfico con Wireshark y tcpdump, identificación de credenciales en protocolos sin cifrado, análisis de cabeceras y payloads.</p>
      <p><strong>Limitaciones:</strong> No se realiza explotación activa ni modificación de tráfico. Solo se analiza tráfico generado en laboratorio.</p>
      <p><strong>Máquina vulnerable sugerida:</strong> <a href="https://sourceforge.net/projects/metasploitable/" target="_blank">Metasploitable 2 (descarga oficial)</a></p>
    </section>

    <section>
      <h2>Requisitos previos</h2>
      <ul>
        <li>Conocimientos básicos de protocolos de red (FTP, Telnet, HTTP)</li>
        <li>Familiaridad con Wireshark y tcpdump</li>
        <li>Entorno: Kali Linux o Parrot OS, Metasploitable2, red en modo puente o NAT</li>
        <li>Herramientas instaladas: Wireshark, tcpdump, netcat, curl, ftp, telnet</li>
      </ul>
    </section>

    <section>
      <h2>Arquitectura del entorno</h2>
      <pre>[ Kali (192.168.1.10) ] ←→ [ Router ] ←→ [ Metasploitable2 (192.168.1.20) ]</pre>
      <p>Ambas máquinas conectadas a la misma red virtual o física, con visibilidad mutua.</p>
    </section>

    <section>
      <h2>Herramientas y entorno técnico</h2>
      <ul>
        <li><strong>Wireshark</strong>: captura y análisis gráfico de tráfico</li>
        <li><strong>tcpdump</strong>: captura CLI de paquetes</li>
        <li><strong>ftp</strong>, <strong>telnet</strong>, <strong>curl</strong>: generación de tráfico inseguro</li>
        <li><strong>netcat</strong>: simulación de servicios inseguros</li>
      </ul>
    </section>

        <section>
      <h2>Procedimiento técnico paso a paso</h2>
      <ol>
        <li>Iniciar captura con tcpdump:
          <pre><code>sudo tcpdump -i eth0 -w credenciales.pcap</code></pre>
        </li>
        <li>Desde Kali, conectarse por FTP a Metasploitable:
          <pre><code>ftp 192.168.1.20</code></pre>
          <p>Usuario: <code>msfadmin</code> – Contraseña: <code>msfadmin</code></p>
        </li>
        <li>Conectarse por Telnet:
          <pre><code>telnet 192.168.1.20</code></pre>
        </li>
        <li>Enviar petición HTTP con autenticación básica:
          <pre><code>curl -u admin:admin http://192.168.1.20/dvwa/login.php</code></pre>
        </li>
        <li>Detener captura y abrir en Wireshark:
          <pre><code>wireshark credenciales.pcap &</code></pre>
        </li>
        <li>Aplicar filtros:
          <pre><code>ftp || telnet || http.authbasic</code></pre>
        </li>
        <li>Inspeccionar paquetes y extraer credenciales en texto plano</li>
      </ol>
    </section>

    <section>
      <h2>Resultados esperados</h2>
      <ul>
        <li>Captura de tráfico con credenciales visibles en protocolos sin cifrado</li>
        <li>Visualización de usuario y contraseña en paquetes FTP, Telnet y HTTP</li>
        <li>Confirmación de la exposición de datos sensibles en tránsito</li>
      </ul>
    </section>

    <section>
      <h2>Análisis de resultados</h2>
      <p>Las credenciales se transmiten en texto plano en protocolos como FTP y Telnet. En HTTP con autenticación básica, el encabezado <code>Authorization: Basic</code> contiene las credenciales codificadas en Base64, fácilmente decodificables. Esto demuestra la vulnerabilidad de estos protocolos frente a ataques de sniffing.</p>
    </section>

    <section>
      <h2>Medidas</h2>
      <ul>
        <li>Documentar los servicios que transmiten credenciales sin cifrado</li>
        <li>Recomendar el uso de protocolos seguros (SFTP, SSH, HTTPS)</li>
        <li>Establecer políticas de desactivación de servicios inseguros</li>
      </ul>
    </section>

    <section>
      <h2>Contramedidas</h2>
      <ul>
        <li>Reemplazar FTP por SFTP o SCP</li>
        <li>Deshabilitar Telnet y usar SSH</li>
        <li>Implementar HTTPS con certificados válidos</li>
        <li>Monitorear tráfico para detectar uso de protocolos inseguros</li>
      </ul>
    </section>

    <section>
      <h2>Riesgos y advertencias</h2>
      <p>La transmisión de credenciales en texto plano permite a un atacante en la misma red interceptarlas fácilmente. Este laboratorio debe realizarse únicamente en entornos controlados. No se debe capturar tráfico en redes reales sin consentimiento explícito.</p>
    </section>

    <section>
      <h2>Evidencias</h2>
      <p><em>Espacio reservado para capturas de pantalla de Wireshark mostrando credenciales en FTP, Telnet y HTTP.</em></p>
    </section>

    <section>
      <h2>Validación cruzada</h2>
      <ul>
        <li><a href="https://www.cisecurity.org/controls/securely-manage-network-protocols" target="_blank">CIS Control 13.3 – Manage Default Accounts and Disable Unused Services</a></li>
        <li><a href="https://csrc.nist.gov/publications/detail/sp/800-95/final" target="_blank">NIST SP 800-95 – Web Services Security</a></li>
        <li><a href="https://attack.mitre.org/techniques/T1040/" target="_blank">MITRE ATT&CK T1040 – Network Sniffing</a></li>
      </ul>
    </section>

        <section>
      <h2>Referencias normativas y técnicas</h2>
      <ul>
        <li><a href="https://www.wireshark.org/docs/" target="_blank">Wireshark Documentation</a></li>
        <li><a href="https://man7.org/linux/man-pages/man8/tcpdump.8.html" target="_blank">tcpdump man page</a></li>
        <li><a href="https://owasp.org/www-project-testing/" target="_blank">OWASP Testing Guide – Insecure Transport</a></li>
      </ul>
    </section>

    <section>
      <h2>Certificaciones asociadas</h2>
      <ul>
        <li>ISC2 Certified in Cybersecurity (CC) – Network Security</li>
        <li>CompTIA Security+ – Domain 2.6</li>
        <li>CEH – Sniffing, Reconocimiento y Post-Explotación</li>
      </ul>
    </section>

    <section>
      <h2>Analogía técnica</h2>
      <p style="font-family: 'Comic Sans MS'; font-size: 12pt;">
        Usar Telnet o FTP sin cifrado es como enviar cartas reales sin sobre: cualquiera que las intercepte puede leer su contenido sin esfuerzo.
      </p>
    </section>

    <section>
      <h2>Nivel de dificultad</h2>
      <p>Intermedio</p>
    </section>

    <section>
      <h2>Checklist final</h2>
      <ul>
        <li>[ ] Captura iniciada con tcpdump</li>
        <li>[ ] Tráfico generado con FTP, Telnet y HTTP</li>
        <li>[ ] Credenciales capturadas y analizadas</li>
        <li>[ ] Evidencias guardadas</li>
        <li>[ ] Validación cruzada documentada</li>
      </ul>
    </section>

    <section>
      <h2>Navegación transversal</h2>
      <ul>
        <li><a href="/el-pergamino-digital/index.html">Portada</a></li>
        <li><a href="/el-pergamino-digital/glosario/">Glosario</a></li>
        <li><a href="/el-pergamino-digital/simulador/">Simulador</a></li>
        <li><a href="/el-pergamino-digital/modulos/">Módulos</a></li>
        <li><a href="/el-pergamino-digital/labs/">Laboratorios</a></li>
      </ul>
    </section>

    <section>
      <h2>Reflexión estratégica</h2>
      <p>Este laboratorio demuestra con claridad por qué los protocolos inseguros deben ser eliminados de cualquier infraestructura moderna. La facilidad con la que se pueden interceptar credenciales en texto plano refuerza la necesidad de cifrado, segmentación de red y monitoreo activo. La visibilidad es poder, pero también responsabilidad.</p>
    </section>

    <section>
      <h2>Disclaimer de advertencia</h2>
      <p><strong>Advertencia:</strong> Este laboratorio está diseñado exclusivamente para fines educativos y debe ejecutarse en entornos controlados. La captura de credenciales en redes reales sin consentimiento explícito puede constituir una violación legal y ética. El uso de herramientas como Wireshark o tcpdump debe realizarse con responsabilidad, respetando las políticas de privacidad y seguridad de la organización. El Pergamino Digital no se responsabiliza por el uso indebido de las técnicas aquí descritas.</p>
    </section>
  </main>

  <footer>
    <p>Este laboratorio forma parte del proyecto <a href="https://pergamino-digital-ciberseguridad.blogspot.com/?m=1" target="_blank">El Pergamino Digital</a>, alineado con estándares internacionales y diseñado para fortalecer competencias técnicas en ciberseguridad.</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const links = document.querySelectorAll("nav a");
      links.forEach(link => {
        if (link.href === window.location.href) {
          link.classList.add("activo");
        }
      });
    });
  </script>
</body>
</html>
    
